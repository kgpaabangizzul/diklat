{% extends 'base.html' %}

{% block title %}Clinical Document Approvals - E-Leary Admin{% endblock %}

{% block content %}
<div class="min-h-screen">
    <div class="relative overflow-hidden bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 dark:from-amber-600 dark:via-orange-600 dark:to-red-600">
        <div class="relative max-w-5xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
            <h1 class="text-3xl md:text-4xl font-extrabold text-white">Clinical Document Approvals</h1>
            <p class="text-white/80">Review and approve clinical onboarding documents</p>
        </div>
    </div>

    <div class="max-w-5xl mx-auto px-4 py-10 sm:px-6 lg:px-8 -mt-6 relative z-10">
        <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg p-8 border border-slate-200/50 dark:border-slate-700/50">
            {% if pending_docs %}
            <div class="space-y-4">
                {% for doc in pending_docs %}
                <div class="p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <p class="text-sm text-slate-500 dark:text-slate-400">Student</p>
                        <p class="text-base font-semibold text-slate-800 dark:text-slate-200">
                            {{ doc.student.user.username if doc.student and doc.student.user else 'Unknown' }}
                        </p>
                        <p class="text-xs text-slate-500 dark:text-slate-400">{{ doc.document_type.replace('_', ' ').title() }}</p>
                        {% if doc.file_path %}
                        <a href="{{ url_for('uploaded_file', filename=doc.file_path) }}" class="text-sm text-teal-600 dark:text-teal-400 hover:underline">View Document</a>
                        {% endif %}
                    </div>
                    <div class="flex items-center gap-3">
                        <form method="POST" action="{{ url_for('approve_clinical_document', doc_id=doc.id) }}">
                            <button type="submit" class="px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold">Approve</button>
                        </form>
                        <form method="POST" action="{{ url_for('reject_clinical_document', doc_id=doc.id) }}">
                            <button type="submit" class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold">Reject</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-12">
                <p class="text-slate-600 dark:text-slate-400">No pending documents.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
