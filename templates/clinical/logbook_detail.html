{% extends 'base.html' %}

{% block title %}Logbook Entry Detail - E-Leary{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-slate-900 dark:to-slate-800 py-12">
    <div class="max-w-4xl mx-auto px-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700">
            <div class="flex items-center justify-between mb-6">
                <h1 class="text-3xl font-bold text-slate-900 dark:text-white">Logbook Entry</h1>
                {% if entry.validated %}
                <span class="px-4 py-2 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 font-semibold rounded-full">✓ Validated</span>
                {% else %}
                <span class="px-4 py-2 bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300 font-semibold rounded-full">Pending Validation</span>
                {% endif %}
            </div>

            <div class="space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 mb-1">Date</p>
                        <p class="text-lg font-semibold text-slate-900 dark:text-white">{{ entry.entry_date.strftime('%Y-%m-%d') }}</p>
                    </div>
                    <div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 mb-1">Unit</p>
                        <p class="text-lg font-semibold text-slate-900 dark:text-white">{{ entry.unit }}</p>
                    </div>
                </div>

                <div>
                    <p class="text-sm text-slate-600 dark:text-slate-400 mb-1">Procedure</p>
                    <p class="text-lg font-semibold text-slate-900 dark:text-white">{{ entry.procedure_name }}</p>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 mb-1">Role</p>
                        <span class="inline-block px-3 py-1 text-sm font-semibold rounded-full
                            {% if entry.role == 'observe' %}bg-blue-100 text-blue-700
                            {% elif entry.role == 'assist' %}bg-purple-100 text-purple-700
                            {% elif entry.role == 'independent' %}bg-green-100 text-green-700
                            {% else %}bg-amber-100 text-amber-700{% endif %}">
                            {{ entry.role.capitalize() }}
                        </span>
                    </div>
                    {% if entry.duration_minutes %}
                    <div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 mb-1">Duration</p>
                        <p class="text-lg font-semibold text-slate-900 dark:text-white">{{ entry.duration_minutes }} minutes</p>
                    </div>
                    {% endif %}
                </div>

                {% if entry.patient_case_summary %}
                <div>
                    <p class="text-sm text-slate-600 dark:text-slate-400 mb-2">Case Summary</p>
                    <div class="p-4 bg-slate-50 dark:bg-slate-900 rounded-lg">
                        <p class="text-slate-700 dark:text-slate-300">{{ entry.patient_case_summary }}</p>
                    </div>
                </div>
                {% endif %}

                {% if entry.learning_points %}
                <div>
                    <p class="text-sm text-slate-600 dark:text-slate-400 mb-2">Learning Points</p>
                    <div class="p-4 bg-slate-50 dark:bg-slate-900 rounded-lg">
                        <p class="text-slate-700 dark:text-slate-300">{{ entry.learning_points }}</p>
                    </div>
                </div>
                {% endif %}

                {% if entry.validated and entry.supervisor_notes %}
                <div>
                    <p class="text-sm text-slate-600 dark:text-slate-400 mb-2">Supervisor Notes</p>
                    <div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800">
                        <p class="text-slate-700 dark:text-slate-300">{{ entry.supervisor_notes }}</p>
                        <p class="text-xs text-slate-500 dark:text-slate-400 mt-2">Validated on {{ entry.validation_timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
                    </div>
                </div>
                {% endif %}
            </div>

            <div class="mt-8">
                <a href="{{ url_for('clinical_logbook') }}" class="inline-flex items-center gap-2 text-teal-600 dark:text-teal-400 hover:underline">
                    ← Back to Logbook
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
