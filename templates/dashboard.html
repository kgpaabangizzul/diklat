{% extends 'base.html' %}

{% block title %}Dashboard - E-Leary{% endblock %}

{% block content %}
<div class="min-h-screen">
    <!-- Hero Section with Welcome -->
    <div class="relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-teal-500 via-emerald-500 to-cyan-500 dark:from-teal-600 dark:via-emerald-600 dark:to-cyan-600"></div>
        <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width=\"60\" height=\"60\" viewBox=\"0 0 60 60\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"none\" fill-rule=\"evenodd\"%3E%3Cg fill=\"%23ffffff\" fill-opacity=\"0.05\"%3E%3Cpath d=\"M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')]"></div>
        <div class="relative max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                <div class="text-white animate-fade-in">
                    <p class="text-teal-200 font-medium mb-2" data-i18n="dashboard_welcome_back">Welcome back</p>
                    <h1 class="text-4xl md:text-5xl font-extrabold mb-4">{{ current_user.username }} ðŸ‘‹</h1>
                    <p class="text-xl text-teal-100 max-w-lg" data-i18n="dashboard_welcome_subtitle">Continue your learning journey and explore new courses to advance your career.</p>
                </div>
                <div class="hidden md:block animate-float">
                    <svg class="w-48 h-48 text-white/20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Decorative Wave -->
        <div class="absolute bottom-0 left-0 right-0">
            <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 120L60 110C120 100 240 80 360 70C480 60 600 60 720 65C840 70 960 80 1080 85C1200 90 1320 90 1380 90L1440 90V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z" class="fill-[#f0fdfa] dark:fill-slate-950"/>
            </svg>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8 -mt-8">
        {% if current_user.is_admin() %}
        <div class="mb-12 animate-slide-up" style="animation-delay: 0.2s">
            <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6" data-i18n="dashboard_admin_clinical_title">Admin: Clinical Module</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <a href="{{ url_for('admin_clinical_modules') }}" class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg p-6 border border-slate-200/50 dark:border-slate-700/50 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-emerald-100 dark:bg-emerald-900/30 rounded-2xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1-3-3-1 3-1 1-3 .75 3 3 1-3 1zM13 7l1-3 1 3 3 1-3 1-1 3-1-3-3-1 3-1zM4 7l1.5-4L7 7l4 1.5L7 10 5.5 14 4 10l-4-1.5L4 7z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white" data-i18n="dashboard_edit_clinical">Edit Clinical Module</h3>
                            <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="dashboard_edit_clinical_desc">Configure documents, agreements, courses, and tests</p>
                        </div>
                    </div>
                </a>
                <a href="{{ url_for('admin_clinical_documents') }}" class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg p-6 border border-slate-200/50 dark:border-slate-700/50 card-hover">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-2xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white" data-i18n="dashboard_approve_clinical">Approve Clinical Docs</h3>
                            <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="dashboard_approve_clinical_desc">Review and approve student documents</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        {% endif %}
        <!-- News Carousel -->
        {% if latest_news %}
        <div class="mb-12 animate-slide-up">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-slate-900 dark:text-white" data-i18n="dashboard_latest_news">Latest News</h2>
                <a href="{{ url_for('news') }}" class="text-violet-600 dark:text-violet-400 hover:text-violet-700 dark:hover:text-violet-300 font-semibold flex items-center gap-1 transition-colors">
                    <span data-i18n="dashboard_view_all">View All</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            <div class="relative">
                <div class="carousel-container overflow-hidden rounded-3xl">
                    <div class="carousel-track flex transition-transform duration-500 ease-in-out" id="newsCarousel">
                        {% for article in latest_news %}
                        <div class="carousel-slide min-w-full">
                            <a href="{{ url_for('news_detail', id=article.id) }}" class="block bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 overflow-hidden border border-slate-200/50 dark:border-slate-700/50 hover:shadow-xl hover:shadow-violet-500/20 dark:hover:shadow-violet-500/30 transition-all duration-300 group h-[400px]">
                                <div class="grid md:grid-cols-2 gap-0 h-full">
                                    <!-- Image Section -->
                                    {% if article.image_path %}
                                        <div class="h-48 md:h-full overflow-hidden bg-gradient-to-br from-violet-100 to-purple-100 dark:from-slate-700 dark:to-slate-600">
                                            <img src="{{ url_for('uploaded_file', filename=article.image_path) }}" 
                                                 alt="{{ article.title }}" 
                                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                                        </div>
                                    {% else %}
                                        <div class="h-48 md:h-full bg-gradient-to-br from-violet-500 via-purple-500 to-indigo-500 flex items-center justify-center">
                                            <svg class="w-24 h-24 text-white/20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
                                            </svg>
                                        </div>
                                    {% endif %}
                                    <!-- Content Section -->
                                    <div class="p-6 md:p-8 flex flex-col justify-center overflow-hidden">
                                        <span class="inline-flex items-center gap-1 text-xs font-semibold text-violet-600 dark:text-violet-400 mb-3">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
                                            </svg>
                                            <span data-i18n="dashboard_latest_news">Latest News</span>
                                        </span>
                                        <h3 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white mb-4 line-clamp-2 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors">
                                            {{ article.title }}
                                        </h3>
                                        <p class="text-slate-600 dark:text-slate-300 mb-6 line-clamp-3">
                                            {{ article.content | striptags | truncate(180) }}
                                        </p>
                                        <div class="flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400">
                                            <span class="flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                                {{ article.author.username }}
                                            </span>
                                            <span class="flex items-center gap-1">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                </svg>
                                                {{ article.created_at.strftime('%b %d, %Y') }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <!-- Carousel Controls -->
                {% if latest_news|length > 1 %}
                <button onclick="previousSlide()" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-slate-800/90 hover:bg-white dark:hover:bg-slate-700 rounded-full shadow-lg flex items-center justify-center transition-all z-10 backdrop-blur-sm border border-slate-200 dark:border-slate-600">
                    <svg class="w-6 h-6 text-slate-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <button onclick="nextSlide()" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-slate-800/90 hover:bg-white dark:hover:bg-slate-700 rounded-full shadow-lg flex items-center justify-center transition-all z-10 backdrop-blur-sm border border-slate-200 dark:border-slate-600">
                    <svg class="w-6 h-6 text-slate-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
                <!-- Carousel Indicators -->
                <div class="flex justify-center gap-2 mt-4">
                    {% for i in range(latest_news|length) %}
                    <button onclick="goToSlide({{ i }})" class="carousel-indicator w-2 h-2 rounded-full bg-slate-300 dark:bg-slate-600 hover:bg-violet-500 dark:hover:bg-violet-400 transition-all {% if i == 0 %}active bg-violet-500 dark:bg-violet-400 w-8{% endif %}"></button>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <!-- Enrolled Courses -->
            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-6 card-hover border border-slate-200/50 dark:border-slate-700/50 animate-slide-up group hover:shadow-xl hover:shadow-teal-500/20 dark:hover:shadow-teal-500/10 transition-all" style="animation-delay: 0.1s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1" data-i18n="dashboard_enrolled_courses">Enrolled Courses</p>
                        <p class="text-4xl font-extrabold text-slate-900 dark:text-white">{{ enrolled_courses }}</p>
                        <p class="text-xs text-teal-600 dark:text-teal-400 mt-2 font-medium" data-i18n="dashboard_active_enrollments">Active enrollments</p>
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-teal-100 to-emerald-100 dark:from-teal-900/40 dark:to-emerald-900/40 rounded-2xl flex items-center justify-center shadow-lg shadow-teal-500/30 group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-teal-600 dark:text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Available Courses -->
            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-6 card-hover border border-slate-200/50 dark:border-slate-700/50 animate-slide-up" style="animation-delay: 0.2s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1" data-i18n="dashboard_available_courses">Available Courses</p>
                        <p class="text-4xl font-extrabold text-slate-900 dark:text-white">{{ course_total }}</p>
                        <p class="text-xs text-blue-600 dark:text-blue-400 mt-2 font-medium" data-i18n="dashboard_ready_to_explore">Ready to explore</p>
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 dark:from-blue-600 dark:to-indigo-700 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/30">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Profile Info -->
            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-6 card-hover border border-slate-200/50 dark:border-slate-700/50 animate-slide-up" style="animation-delay: 0.3s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1" data-i18n="dashboard_division">Division</p>
                        <p class="text-2xl font-extrabold text-slate-900 dark:text-white">{{ current_user.division or 'Not set' }}</p>
                        {% if current_user.is_admin() %}
                            <span class="inline-flex items-center gap-1 mt-2 px-3 py-1 bg-gradient-to-r from-amber-100 to-yellow-100 dark:from-amber-600/30 dark:to-yellow-600/30 text-amber-700 dark:text-amber-300 text-xs font-bold rounded-full">
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                <span data-i18n="dashboard_admin_account">Admin Account</span>
                            </span>
                        {% endif %}
                    </div>
                    <div class="w-16 h-16 bg-gradient-to-br from-emerald-400 to-emerald-600 dark:from-emerald-600 dark:to-emerald-700 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-8 card-hover border border-slate-200/50 dark:border-slate-700/50 group animate-slide-up" style="animation-delay: 0.4s">
                <div class="flex items-start gap-6">
                    <div class="w-14 h-14 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg shadow-teal-500/30 group-hover:scale-110 transition-transform">
                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2" data-i18n="dashboard_continue_learning">Continue Learning</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-6" data-i18n="dashboard_continue_learning_desc">Explore new courses and continue your educational journey with our comprehensive training materials.</p>
                        <a href="{{ url_for('courses') }}" class="inline-flex items-center gap-2 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-600 hover:to-emerald-600 dark:from-teal-600 dark:to-emerald-600 dark:hover:from-teal-700 dark:hover:to-emerald-700 text-white font-semibold py-3 px-6 rounded-2xl shadow-lg shadow-teal-500/30 transition-all duration-300 transform hover:scale-105 active:scale-95">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                            </svg>
                            <span data-i18n="dashboard_browse_courses">Browse Courses</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-8 card-hover border border-slate-200/50 dark:border-slate-700/50 group animate-slide-up" style="animation-delay: 0.5s">
                <div class="flex items-start gap-6">
                    <div class="w-14 h-14 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/30 group-hover:scale-110 transition-transform">
                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2" data-i18n="dashboard_explore_library">Explore E-Library</h2>
                        <p class="text-slate-600 dark:text-slate-400 mb-6" data-i18n="dashboard_explore_library_desc">Browse approved documents or upload your own materials to share knowledge with colleagues.</p>
                        <a href="{{ url_for('library') }}" class="inline-flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 dark:from-emerald-600 dark:to-cyan-600 dark:hover:from-emerald-700 dark:hover:to-cyan-700 text-white font-semibold py-3 px-6 rounded-2xl shadow-lg shadow-emerald-500/30 transition-all duration-300 transform hover:scale-105 active:scale-95">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                            </svg>
                            <span data-i18n="dashboard_visit_library">Visit Library</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clinical Practice Section -->
        {% if student_profile %}
        <div class="mb-12 animate-slide-up" style="animation-delay: 0.55s">
            <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6" data-i18n="dashboard_clinical_practice">Clinical Practice</h2>
            <div class="grid md:grid-cols-4 gap-6">
                <!-- Onboarding Status -->
                <a href="{{ url_for('clinical_onboarding') }}" class="bg-gradient-to-br from-teal-500 to-cyan-600 rounded-3xl shadow-lg p-6 card-hover border border-teal-400/50 hover:shadow-xl hover:shadow-teal-500/30 transition-all group">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-white font-bold text-lg" data-i18n="dashboard_pre_clinical">Pre-Clinical</h3>
                        {% if student_profile.onboarding_complete %}
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        {% else %}
                        <span class="bg-white/20 text-white text-xs px-2 py-1 rounded-full" data-i18n="dashboard_in_progress">In Progress</span>
                        {% endif %}
                    </div>
                    <p class="text-teal-100 text-sm mb-4" data-i18n="dashboard_onboarding_requirements">Complete onboarding requirements</p>
                    <div class="flex items-center text-white font-semibold">
                        <span class="mr-2" data-i18n="dashboard_view_status">View Status</span>
                        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </div>
                </a>

                <!-- Digital Logbook -->
                <a href="{{ url_for('clinical_logbook') }}" class="bg-gradient-to-br from-purple-500 to-indigo-600 rounded-3xl shadow-lg p-6 card-hover border border-purple-400/50 hover:shadow-xl hover:shadow-purple-500/30 transition-all group">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-white font-bold text-lg" data-i18n="dashboard_digital_logbook">Digital Logbook</h3>
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <p class="text-purple-100 text-sm mb-4" data-i18n="dashboard_logbook_desc">Record procedures and competencies</p>
                    <div class="flex items-center text-white font-semibold">
                        <span class="mr-2" data-i18n="dashboard_open_logbook">Open Logbook</span>
                        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </div>
                </a>

                <!-- Daily Journal -->
                <a href="{{ url_for('clinical_journal') }}" class="bg-gradient-to-br from-emerald-500 to-green-600 rounded-3xl shadow-lg p-6 card-hover border border-emerald-400/50 hover:shadow-xl hover:shadow-emerald-500/30 transition-all group">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-white font-bold text-lg" data-i18n="dashboard_daily_journal">Daily Journal</h3>
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                    </div>
                    <p class="text-emerald-100 text-sm mb-4" data-i18n="dashboard_daily_journal_desc">Reflect on daily experiences</p>
                    <div class="flex items-center text-white font-semibold">
                        <span class="mr-2" data-i18n="dashboard_write_entry">Write Entry</span>
                        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </div>
                </a>

                <!-- Patient Case Tracking -->
                <a href="{{ url_for('clinical_cases') }}" class="bg-gradient-to-br from-amber-500 to-orange-600 rounded-3xl shadow-lg p-6 card-hover border border-amber-400/50 hover:shadow-xl hover:shadow-amber-500/30 transition-all group">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-white font-bold text-lg" data-i18n="dashboard_patient_cases">Patient Cases</h3>
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3M5 11h14M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <p class="text-amber-100 text-sm mb-4" data-i18n="dashboard_patient_cases_desc">Track cases day-by-day until completion</p>
                    <div class="flex items-center text-white font-semibold">
                        <span class="mr-2" data-i18n="dashboard_manage_cases">Manage Cases</span>
                        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </div>
                </a>
            </div>
        </div>
        {% else %}
        <!-- Clinical Practice Registration CTA -->
        <div class="bg-gradient-to-br from-teal-500 via-cyan-500 to-blue-500 rounded-3xl shadow-xl p-8 mb-12 text-white animate-slide-up" style="animation-delay: 0.55s">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex items-start gap-6">
                    <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold mb-2" data-i18n="dashboard_join_clinical">Join Clinical Practice Program</h2>
                        <p class="text-teal-100 max-w-2xl" data-i18n="dashboard_join_clinical_desc">Register for clinical rotations and access digital logbook, e-learning modules, and competency tracking.</p>
                    </div>
                </div>
                <a href="{{ url_for('clinical_student_registration') }}" class="bg-white hover:bg-teal-50 text-teal-600 font-bold py-3 px-6 rounded-2xl shadow-lg transition-all hover:scale-105 active:scale-95 flex-shrink-0">
                    <span data-i18n="dashboard_register_now">Register Now</span>
                </a>
            </div>
        </div>
        {% endif %}

        {% if current_user.is_admin() %}
            <!-- Admin Panel Link -->
            <div class="bg-white dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50 p-8 card-hover border border-slate-200/50 dark:border-slate-700/50 animate-slide-up hover:shadow-xl hover:shadow-purple-500/20 dark:hover:shadow-purple-500/10 transition-all" style="animation-delay: 0.6s">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
                    <div class="flex items-start gap-6">
                        <div class="w-14 h-14 bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/30">
                            <svg class="w-7 h-7 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2" data-i18n="dashboard_admin_panel">Admin Panel</h2>
                            <p class="text-slate-600 dark:text-slate-400" data-i18n="dashboard_admin_panel_desc">Manage courses, approve documents, and oversee system activities.</p>
                        </div>
                    </div>
                    <div class="flex gap-3 flex-wrap">
                        <a href="{{ url_for('admin_approvals') }}" class="inline-flex items-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 dark:from-purple-600 dark:to-pink-600 dark:hover:from-purple-700 dark:hover:to-pink-700 text-white font-semibold py-3 px-5 rounded-2xl shadow-lg shadow-purple-500/30 transition-all duration-300 transform hover:scale-105 active:scale-95">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <span data-i18n="dashboard_approve_documents">Approve Documents</span>
                        </a>
                        <a href="{{ url_for('admin_courses') }}" class="inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600 dark:from-indigo-600 dark:to-blue-600 dark:hover:from-indigo-700 dark:hover:to-blue-700 text-white font-semibold py-3 px-5 rounded-2xl shadow-lg shadow-indigo-500/30 transition-all duration-300 transform hover:scale-105 active:scale-95">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                            </svg>
                            <span data-i18n="dashboard_manage_courses">Manage Courses</span>
                        </a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<script>
window.PAGE_TRANSLATIONS = {
    en: {
        dashboard_welcome_back: 'Welcome back',
        dashboard_welcome_subtitle: 'Continue your learning journey and explore new courses to advance your career.',
        dashboard_admin_clinical_title: 'Admin: Clinical Module',
        dashboard_edit_clinical: 'Edit Clinical Module',
        dashboard_edit_clinical_desc: 'Configure documents, agreements, courses, and tests',
        dashboard_approve_clinical: 'Approve Clinical Docs',
        dashboard_approve_clinical_desc: 'Review and approve student documents',
        dashboard_latest_news: 'Latest News',
        dashboard_view_all: 'View All',
        dashboard_enrolled_courses: 'Enrolled Courses',
        dashboard_active_enrollments: 'Active enrollments',
        dashboard_available_courses: 'Available Courses',
        dashboard_ready_to_explore: 'Ready to explore',
        dashboard_division: 'Division',
        dashboard_admin_account: 'Admin Account',
        dashboard_continue_learning: 'Continue Learning',
        dashboard_continue_learning_desc: 'Explore new courses and continue your educational journey with our comprehensive training materials.',
        dashboard_browse_courses: 'Browse Courses',
        dashboard_explore_library: 'Explore E-Library',
        dashboard_explore_library_desc: 'Browse approved documents or upload your own materials to share knowledge with colleagues.',
        dashboard_visit_library: 'Visit Library',
        dashboard_clinical_practice: 'Clinical Practice',
        dashboard_pre_clinical: 'Pre-Clinical',
        dashboard_in_progress: 'In Progress',
        dashboard_onboarding_requirements: 'Complete onboarding requirements',
        dashboard_view_status: 'View Status',
        dashboard_digital_logbook: 'Digital Logbook',
        dashboard_logbook_desc: 'Record procedures and competencies',
        dashboard_open_logbook: 'Open Logbook',
        dashboard_daily_journal: 'Daily Journal',
        dashboard_daily_journal_desc: 'Reflect on daily experiences',
        dashboard_write_entry: 'Write Entry',
        dashboard_patient_cases: 'Patient Cases',
        dashboard_patient_cases_desc: 'Track cases day-by-day until completion',
        dashboard_manage_cases: 'Manage Cases',
        dashboard_join_clinical: 'Join Clinical Practice Program',
        dashboard_join_clinical_desc: 'Register for clinical rotations and access digital logbook, e-learning modules, and competency tracking.',
        dashboard_register_now: 'Register Now',
        dashboard_admin_panel: 'Admin Panel',
        dashboard_admin_panel_desc: 'Manage courses, approve documents, and oversee system activities.',
        dashboard_approve_documents: 'Approve Documents',
        dashboard_manage_courses: 'Manage Courses'
    },
    id: {
        dashboard_welcome_back: 'Selamat datang kembali',
        dashboard_welcome_subtitle: 'Lanjutkan perjalanan belajar Anda dan jelajahi kursus baru untuk meningkatkan karier.',
        dashboard_admin_clinical_title: 'Admin: Modul Klinik',
        dashboard_edit_clinical: 'Kelola Modul Klinik',
        dashboard_edit_clinical_desc: 'Konfigurasi dokumen, perjanjian, kursus, dan tes',
        dashboard_approve_clinical: 'Setujui Dokumen Klinik',
        dashboard_approve_clinical_desc: 'Tinjau dan setujui dokumen mahasiswa',
        dashboard_latest_news: 'Berita Terbaru',
        dashboard_view_all: 'Lihat Semua',
        dashboard_enrolled_courses: 'Kursus Terdaftar',
        dashboard_active_enrollments: 'Pendaftaran aktif',
        dashboard_available_courses: 'Kursus Tersedia',
        dashboard_ready_to_explore: 'Siap dijelajahi',
        dashboard_division: 'Divisi',
        dashboard_admin_account: 'Akun Admin',
        dashboard_continue_learning: 'Lanjut Belajar',
        dashboard_continue_learning_desc: 'Jelajahi kursus baru dan lanjutkan perjalanan belajar Anda dengan materi pelatihan yang komprehensif.',
        dashboard_browse_courses: 'Jelajahi Kursus',
        dashboard_explore_library: 'Jelajahi E-Perpustakaan',
        dashboard_explore_library_desc: 'Telusuri dokumen yang disetujui atau unggah materi Anda untuk berbagi pengetahuan dengan rekan kerja.',
        dashboard_visit_library: 'Kunjungi Perpustakaan',
        dashboard_clinical_practice: 'Praktik Klinik',
        dashboard_pre_clinical: 'Pra-Klinik',
        dashboard_in_progress: 'Sedang Berjalan',
        dashboard_onboarding_requirements: 'Selesaikan persyaratan orientasi',
        dashboard_view_status: 'Lihat Status',
        dashboard_digital_logbook: 'Logbook Digital',
        dashboard_logbook_desc: 'Catat prosedur dan kompetensi',
        dashboard_open_logbook: 'Buka Logbook',
        dashboard_daily_journal: 'Jurnal Harian',
        dashboard_daily_journal_desc: 'Refleksikan pengalaman harian',
        dashboard_write_entry: 'Tulis Entri',
        dashboard_patient_cases: 'Kasus Pasien',
        dashboard_patient_cases_desc: 'Pantau kasus hari demi hari hingga selesai',
        dashboard_manage_cases: 'Kelola Kasus',
        dashboard_join_clinical: 'Bergabung Program Praktik Klinik',
        dashboard_join_clinical_desc: 'Daftar rotasi klinik dan akses logbook digital, modul e-learning, serta pelacakan kompetensi.',
        dashboard_register_now: 'Daftar Sekarang',
        dashboard_admin_panel: 'Panel Admin',
        dashboard_admin_panel_desc: 'Kelola kursus, setujui dokumen, dan awasi aktivitas sistem.',
        dashboard_approve_documents: 'Setujui Dokumen',
        dashboard_manage_courses: 'Kelola Kursus'
    }
};

let currentSlide = 0;
const carousel = document.getElementById('newsCarousel');
const indicators = document.querySelectorAll('.carousel-indicator');
const totalSlides = {{ latest_news|length if latest_news else 0 }};

function updateCarousel() {
    if (carousel) {
        carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
        indicators.forEach((indicator, index) => {
            if (index === currentSlide) {
                indicator.classList.add('active', 'bg-violet-500', 'dark:bg-violet-400', 'w-8');
                indicator.classList.remove('bg-slate-300', 'dark:bg-slate-600', 'w-2');
            } else {
                indicator.classList.remove('active', 'bg-violet-500', 'dark:bg-violet-400', 'w-8');
                indicator.classList.add('bg-slate-300', 'dark:bg-slate-600', 'w-2');
            }
        });
    }
}

function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateCarousel();
}

function previousSlide() {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    updateCarousel();
}

function goToSlide(index) {
    currentSlide = index;
    updateCarousel();
}

// Auto-advance carousel every 5 seconds
{% if latest_news and latest_news|length > 1 %}
setInterval(nextSlide, 5000);
{% endif %}
</script>
{% endblock %}
